<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="868px" preserveAspectRatio="none" style="width:1190px;height:868px;background:#FFFFFF;" version="1.1" viewBox="0 0 1190 868" width="1190px" zoomAndPan="magnify"><defs/><g><rect fill="#90EE90" height="856.4453" style="stroke:#181818;stroke-width:0.5;" width="117" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="4" y="18.0669">PX4 &amp; dop_sim</text><rect fill="#ADD8E6" height="856.4453" style="stroke:#181818;stroke-width:0.5;" width="312" x="185" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="277" x="202.5" y="18.0669">(TX2 NX)  ndp_nmpc/controller_node</text><rect fill="#FFFFFF" height="856.4453" style="stroke:#181818;stroke-width:0.5;" width="344.5" x="784" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="206" x="853.25" y="18.0669">PC -&gt; cmd_pc/planner_node</text><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="288" x="11" y="217.2266"/><rect fill="none" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="955.5" x="179" y="595.0859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="73.4297" y2="811.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="239" x2="239" y1="73.4297" y2="811.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="434" x2="434" y1="73.4297" y2="811.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="822" x2="822" y1="73.4297" y2="811.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1104.5" x2="1104.5" y1="73.4297" y2="811.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="21" y="70.1279">quadrotor</text><ellipse cx="59.5" cy="41.1328" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="71.5" y1="55.1328" y2="55.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="21" y="823.1436">quadrotor</text><ellipse cx="59.5" cy="842.4453" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="71.5" y1="856.4453" y2="856.4453"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="189" y="42.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="196" y="62.1279">tmr_control</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="189" y="810.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="196" y="830.1436">tmr_control</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="375" y="42.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="382" y="62.1279">action_pt_pub</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="375" y="810.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="382" y="830.1436">action_pt_pub</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="788" y="42.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="795" y="62.1279">planner</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="788" y="810.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="795" y="830.1436">planner</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="1084.5" y="42.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1091.5" y="62.1279">rviz</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="1084.5" y="810.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1091.5" y="830.1436">rviz</text><path d="M178,88.4297 L178,166.4297 L495,166.4297 L495,98.4297 L485,88.4297 L178,88.4297 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M485,88.4297 L485,98.4297 L495,98.4297 L485,88.4297 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="184" y="105.4966">- Restart in each round</text><line style="stroke:#181818;stroke-width:1.0;" x1="179" x2="494" y1="108.5625" y2="108.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="184" y="124.6294">1. Discretize a traj. and generate target points</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="184" y="139.7622">2. Execute NMPC, tracking trajectory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="184" y="154.895">3. Send command to low-level controller</text><path d="M743,88.4297 L743,204.4297 L1183,204.4297 L1183,98.4297 L1173,88.4297 L743,88.4297 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M1173,88.4297 L1173,98.4297 L1183,98.4297 L1173,88.4297 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="749" y="105.4966">- Keep running</text><line style="stroke:#181818;stroke-width:1.0;" x1="744" x2="1182" y1="108.5625" y2="108.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="749" y="124.6294">1. Input path points</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="749" y="139.7622">2. Use minimum snap to generate a traj.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="749" y="154.895">3. Publish the traj. as the format of task</text><line style="stroke:#181818;stroke-width:1.0;" x1="744" x2="1182" y1="161.9609" y2="161.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="419" x="749" y="178.0278">Use transitions package to implement Finite State Machine (FSM);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="749" y="193.1606">Organize code in class, as ROS2 does.</text><path d="M11,217.2266 L89,217.2266 L89,224.3594 L79,234.3594 L11,234.3594 L11,217.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="288" x="11" y="217.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="26" y="230.2935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="61" x="104" y="229.437">[forever]</text><polygon fill="#181818" points="70.5,266.625,60.5,270.625,70.5,274.625,66.5,270.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="64.5" x2="238" y1="270.625" y2="270.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="76.5" y="257.9927">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="89.5" y="250.4263">AttitudeTarget,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="89.5" y="265.5591">Body rate cmd</text><path d="M689,290.625 L689,315.625 L817,315.625 L817,300.625 L807,290.625 L689,290.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M807,290.625 L807,300.625 L817,300.625 L807,290.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="695" y="307.6919">State: PLANNING</text><line style="stroke:#181818;stroke-width:1.0;" x1="822.5" x2="864.5" y1="372.1563" y2="372.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="864.5" x2="864.5" y1="372.1563" y2="385.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="823.5" x2="864.5" y1="385.1563" y2="385.1563"/><polygon fill="#181818" points="833.5,381.1563,823.5,385.1563,833.5,389.1563,829.5,385.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="829.5" y="351.9575">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="842.5" y="336.8247">Get path points from files,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="846.5" y="351.9575">or from rviz cmd,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="846.5" y="367.0903">or from path planning</text><polygon fill="#181818" points="1092.5,410.2891,1102.5,414.2891,1092.5,418.2891,1096.5,414.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="822.5" x2="1098.5" y1="414.2891" y2="414.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="829.5" y="409.2231">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="841.5" y="409.2231">Draw Path</text><line style="stroke:#181818;stroke-width:1.0;" x1="822.5" x2="864.5" y1="443.4219" y2="443.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="864.5" x2="864.5" y1="443.4219" y2="456.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="823.5" x2="864.5" y1="456.4219" y2="456.4219"/><polygon fill="#181818" points="833.5,452.4219,823.5,456.4219,833.5,460.4219,829.5,456.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="829.5" y="438.356">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="842.5" y="438.356">Trajectory generation</text><polygon fill="#181818" points="1092.5,481.5547,1102.5,485.5547,1092.5,489.5547,1096.5,485.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="822.5" x2="1098.5" y1="485.5547" y2="485.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="829.5" y="480.4888">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="842.5" y="480.4888">Draw the traj. in the form of Path msg</text><path d="M680,498.5547 L680,523.5547 L817,523.5547 L817,508.5547 L807,498.5547 L680,498.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M807,498.5547 L807,508.5547 L817,508.5547 L807,498.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="686" y="515.6216">State: EXECUTION</text><polygon fill="#181818" points="445,576.0859,435,580.0859,445,584.0859,441,580.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="821.5" y1="580.0859" y2="580.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="451" y="559.8872">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="464" y="544.7544">action.send_goal,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="464" y="559.8872">Set params for trajectory,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="464" y="575.02">reset starting time.</text><path d="M179,595.0859 L257,595.0859 L257,602.2188 L247,612.2188 L179,612.2188 L179,595.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="955.5" x="179" y="595.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="194" y="608.1528">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="272" y="607.2964">[when tracking]</text><polygon fill="#181818" points="250,629.3516,240,633.3516,250,637.3516,246,633.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="244" x2="433" y1="633.3516" y2="633.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="256" y="628.2856">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="269" y="628.2856">Generate control targets</text><polygon fill="#181818" points="810.5,673.6172,820.5,677.6172,810.5,681.6172,814.5,677.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="434" x2="816.5" y1="677.6172" y2="677.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="441" y="664.9849">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="454" y="657.4185">action.publish_feedback,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341" x="454" y="672.5513">Notify the percentage and error of trajectory tracking</text><polygon fill="#181818" points="1092.5,702.75,1102.5,706.75,1092.5,710.75,1096.5,706.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="434" x2="1098.5" y1="706.75" y2="706.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="441" y="701.6841">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="454" y="701.6841">Pub tf2 and Odom to represent the current position</text><polygon fill="#181818" points="810.5,754.0156,820.5,758.0156,810.5,762.0156,814.5,758.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="434" x2="816.5" y1="758.0156" y2="758.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="441" y="745.3833">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="464" y="737.8169">action.set_succeeded,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="464" y="752.9497">Notify the success of traj. tracking</text><path d="M689,771.0156 L689,796.0156 L817,796.0156 L817,781.0156 L807,771.0156 L689,771.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M807,771.0156 L807,781.0156 L817,781.0156 L807,771.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="695" y="788.0825">State: PLANNING</text><!--SRC=[XLHDRzj64BtlhnZ4G9K04eqwFQb00SUM3IEsB4GowaC1OaMEfAt9NMPtQSSvEQUsRb2ajo0e6WH5S-WXlHK1MY1_nf-d_eNEK9H8fQxB4xcSdVVcpPjfJBpFN7jvEKkazdcQ1959bnq-pb57s8gL75kP2Y5pRtIU3j4ACJHFu4vl_pFu16AJXKwbTs1fMuqdVjCYQe7QAtyCZtCPM-EDfOCOw59vy-vWVmMw-_S0T9o5EisYvSXeRqsIe0srYN6Mxi7sNaTaqdeLgOpeWKzjMCOkdCl8AwF3p8TPFgpWjF48vX1j_M9pCHgMZYRAesZ18tIUSeBIW3AQW3MvZaMhrHAV1h2kN6JHgwS84hoLNmSW2MQC6gqa5BevHW-PKTexiH90vmb6EVtexlJMcdmZEb1wN5p5Y4Gv5lS3w3DL4ZpbNDv0OevQ2HvY0fKYHJbSYH3BLK7SBe9kWZrKJwiQ7Y9cO7Ej2Mj6VKjdEJ6JVbAZj-SGKgLLcgVWjCmOVLvCMI4pxEN3HBa9-0dEodR5nyZOL7em8ohT7HHOd9DYj5EihoF8w42EaLEhD4im9MF01e4IHDypq0xfh3J2tOt-phtFnQuTIyqIHsG2xaEKIEUQ3Fbejxz2RaCNrFH8ZCcO22bcHQt5qFgYSbyRLZtvCOznKFIe2L_f1oO-XgBKA8qveH2DGblBjkEYfkRWqadi9KdPHEFwfvEhjy_E_lo1o5n_y_pY-mzdxq_Etlz6JfGfUkBGk7ppxlpTgukNlr-VVDVltB_wy9BUsGAYKT6UpiyQioJuaFnVTdDc_Y-BRjODNWRCHekR_f7D4nnLOOMwRUXjhtQxMztDIh8oWA7BrpPiue8xO6HD2YELe6EfmDZfIM4quhjmEBt7cTXmjUmStOPrAu-WHp6YmP5XBO3D59QEuoOvJ4PXZ2EoGnmuUnXiaFlDKN7vHjg3-IJDZ4kc-myAbNl9L3FtSfivFQHkN1UHkx-eOsU_ixOtsDhjrhnN0rhO9-toCt0K6uwDJ5YmVg4nsSGnT6qBy4-BZduNowTO4Ih5e3JtqGJrV7a8e6TnUR6GbU-vb-K8poPXkfVSpLVdMfQKIyU78yHuI9XChcky6XqNecLe8p8WZpJlAxIMIk45K7NYTghJZj1A0JzQANBincGYsWyMCrQ1Lpm1HRcr_9wPwIgPJkZ_qYSLGvT74R77-2FknRbpCxf1nRHnaxbkSICdFl_nzFBrh_n5utt-uktrBpzVlNb-yUsByzFNjrlftoCf6d1v-iV5oRE__te5WzM7dTsDZUOyhbcPhmbqjluF]--></g></svg>